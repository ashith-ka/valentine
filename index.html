<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For Sujishna ‚ù§Ô∏è</title>

  <!-- Google Font -->
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=Inter:wght@400;500;600&display=swap"
    rel="stylesheet">

  <style>
    :root {
      --bg1: #ffdde1;
      --bg2: #ee9ca7;
      --card-bg: rgba(255, 255, 255, 0.18);
      --accent: #c2185b;
      --gold: #f7d774;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      background:
        radial-gradient(circle at 15% 20%, rgba(255, 255, 255, 0.35), transparent 45%),
        radial-gradient(circle at 85% 30%, rgba(255, 182, 193, 0.35), transparent 45%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      overflow-x: hidden;
    }

    /* subtle animated ambient light */
    body::before {
      content: '';
      position: fixed;
      inset: -40%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.18), transparent 60%);
      animation: ambient 16s ease-in-out infinite;
      z-index: 0;
      pointer-events: none;
    }

    @keyframes ambient {
      0% {
        transform: translate(-8%, -8%);
      }

      50% {
        transform: translate(8%, 8%);
      }

      100% {
        transform: translate(-8%, -8%);
      }
    }

    main {
      position: relative;
      width: 100%;
      padding: clamp(16px, 5vw, 24px);
      z-index: 1;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card {
      margin: 0 auto;
      width: 100%;
      max-width: 420px;
      background: var(--card-bg);
      backdrop-filter: blur(18px);
      border-radius: 28px;
      padding: clamp(28px, 8vw, 36px) clamp(20px, 6vw, 28px) clamp(32px, 8vw, 40px);
      text-align: center;
      box-shadow: 0 32px 70px rgba(0, 0, 0, 0.28);
      animation: float 5s ease-in-out infinite;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-10px);
      }
    }

    h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.75rem, 6vw, 2.5rem);
      margin: 0 0 clamp(4px, 2vw, 6px);
      letter-spacing: 0.3px;
    }

    h2 {
      font-weight: 500;
      font-size: clamp(1rem, 4vw, 1.15rem);
      margin: 0 0 clamp(16px, 4vw, 20px);
      opacity: 0.95;
    }

    p {
      font-size: clamp(0.95rem, 3.5vw, 1.02rem);
      line-height: 1.6;
      margin: 0 0 clamp(20px, 5vw, 28px);
      opacity: 0.95;
    }

    .buttons {
      display: flex;
      flex-direction: column;
      gap: clamp(12px, 3vw, 16px);
      justify-content: center;
      align-items: stretch;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: clamp(14px, 4vw, 16px) clamp(24px, 8vw, 28px);
      font-size: clamp(0.95rem, 3.5vw, 1rem);
      font-weight: 600;
      cursor: pointer;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
      min-height: 48px;
      touch-action: manipulation;
    }

    button:active {
      transform: scale(0.96);
    }

    .yes {
      background: linear-gradient(135deg, #fff3a0, var(--gold));
      color: var(--accent);
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.25);
      transition: all 0.3s ease;
    }

    .yes:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.35);
      animation: bounce 0.6s ease infinite;
    }

    .no {
      background: rgba(255, 255, 255, 0.25);
      color: #fff;
      transition: all 0.3s ease;
    }

    .no:hover {
      transform: scale(0.95);
      background: rgba(255, 255, 255, 0.35);
    }

    @keyframes bounce {

      0%,
      100% {
        transform: translateY(-4px) scale(1.05);
      }

      50% {
        transform: translateY(-8px) scale(1.05);
      }
    }

    .result {
      margin-top: 22px;
      font-size: 1.15rem;
      font-weight: 600;
      min-height: 1.4em;
    }

    /* floating hearts kept minimal */
    .heart {
      position: fixed;
      font-size: 20px;
      animation: rise 6s linear forwards;
      opacity: 0.8;
      pointer-events: auto;
      z-index: 50;
      cursor: pointer;
    }

    /* larger hit areas and touch feedback for mobile */
    .heart.touch-feedback {
      transition: transform 140ms ease-out, opacity 300ms linear;
      transform-origin: center center;
    }

    @media (pointer: coarse) {
      .heart {
        font-size: 28px;
        padding: 8px;
        /* larger tap target */
      }
    }

    @keyframes rise {
      from {
        transform: translateY(100vh) scale(1);
        opacity: 0;
      }

      10% {
        opacity: 1;
      }

      to {
        transform: translateY(-10vh) scale(1.4);
        opacity: 0;
      }
    }

    .surprise {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.2), transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255, 182, 193, 0.3), transparent 50%),
        radial-gradient(circle at 50% 20%, rgba(255, 192, 203, 0.2), transparent 55%),
        linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
      background-size: 200% 200%, 200% 200%, 200% 200%, 100% 100%;
      display: none;
      align-items: center;
      justify-content: center;
      padding: clamp(16px, 5vw, 28px);
      z-index: 20;
      overflow-y: auto;
      animation: surpriseFlow 8s ease-in-out infinite;
    }

    @keyframes surpriseFlow {
      0% {
        background-position: 0% 0%, 0% 0%, 0% 0%;
      }

      50% {
        background-position: 100% 100%, 100% 100%, 100% 100%;
      }

      100% {
        background-position: 0% 0%, 0% 0%, 0% 0%;
      }
    }

    .surprise.show {
      display: flex;
    }

    .surprise-card {
      max-width: 480px;
      width: 100%;
      background: rgba(255, 255, 255, 0.35);
      backdrop-filter: blur(20px);
      border-radius: 32px;
      padding: clamp(32px, 8vw, 44px) clamp(24px, 6vw, 32px);
      text-align: center;
      box-shadow: 0 40px 80px rgba(0, 0, 0, 0.3);
      animation: reveal .8s ease forwards;
      position: relative;
      z-index: 100;
    }

    @keyframes reveal {
      from {
        opacity: 0;
        transform: translateY(20px) scale(.96);
      }

      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .surprise h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(1.75rem, 6vw, 2.2rem);
      margin-bottom: clamp(12px, 3vw, 18px);
      color: #fff;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .surprise p {
      font-size: clamp(0.95rem, 3.5vw, 1.08rem);
      line-height: 1.7;
      color: #fff;
      text-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
    }

    .firework {
      position: fixed;
      pointer-events: none;
      font-size: 1.5rem;
    }

    @keyframes explode {
      0% {
        opacity: 1;
        transform: translate(0, 0) scale(1);
      }

      100% {
        opacity: 0;
        transform: translate(var(--tx), var(--ty)) scale(0);
      }
    }

    .firework-particle {
      position: fixed;
      pointer-events: none;
      animation: explode 1.2s ease-out forwards;
    }

    /* confetti styles */
    .confetti {
      position: fixed;
      pointer-events: none;
      font-size: 1rem;
    }

    @keyframes confetti-fall {
      to {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    .confetti {
      animation: confetti-fall 3s ease-in forwards;
    }

    /* floating roses */
    .rose {
      position: fixed;
      font-size: 24px;
      animation: float-rose 8s ease-in-out infinite;
      opacity: 0.7;
      pointer-events: none;
    }

    @keyframes float-rose {

      0%,
      100% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 0.7;
      }

      25% {
        transform: translateY(-100px) translateX(80px) rotate(20deg);
      }

      50% {
        transform: translateY(-200px) translateX(0) rotate(0deg);
        opacity: 0.9;
      }

      75% {
        transform: translateY(-100px) translateX(-80px) rotate(-20deg);
      }
    }

    /* sparkle effect */
    .sparkle {
      position: fixed;
      pointer-events: none;
      font-size: 0.8rem;
      animation: sparkle-twinkle 1s ease-in-out forwards;
    }

    @keyframes sparkle-twinkle {

      0%,
      100% {
        opacity: 0;
      }

      50% {
        opacity: 1;
      }
    }

    /* desktop tweaks */
    @media (min-width: 480px) {
      .buttons {
        flex-direction: row;
        gap: clamp(12px, 4vw, 22px);
      }

      button {
        flex: 1;
      }
    }

    @media (min-width: 768px) {
      .card {
        padding: 44px 36px 48px;
      }

      button {
        min-height: auto;
      }
    }

    /* beating heart animation */
    .beating-heart {
      display: inline-block;
      animation: heartbeat 1.2s ease-in-out infinite;
    }

    @keyframes heartbeat {

      0%,
      100% {
        transform: scale(1);
      }

      25% {
        transform: scale(1.3);
      }

      50% {
        transform: scale(1);
      }
    }

    /* easter egg glow effect */
    @keyframes glow-burst {
      0% {
        text-shadow: 0 0 5px #ff1493, 0 0 10px #ff69b4;
        transform: scale(1);
      }

      50% {
        text-shadow: 0 0 20px #ff1493, 0 0 30px #ff69b4, 0 0 40px #ffc0cb;
        transform: scale(1.2);
      }

      100% {
        text-shadow: 0 0 5px #ff1493, 0 0 10px #ff69b4;
        transform: scale(1);
      }
    }
  </style>
</head>

<body>

  <audio id="music" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5f7a2a0d2c.mp3" type="audio/mpeg">
  </audio>

  <!-- Controls: Sound & Haptics opt-in -->
  <div id="controls" style="position:fixed;right:14px;top:14px;z-index:120;">
    <label
      style="background:rgba(255,255,255,0.12);backdrop-filter:blur(6px);padding:8px 10px;border-radius:12px;display:flex;align-items:center;gap:8px;font-size:13px;color:#fff;">
      <input id="toggleSound" type="checkbox" style="width:16px;height:16px;" />
      <span>Sound & Haptics</span>
    </label>
  </div>

  <main>
    <section class="card">
      <h1>Sujishna <span class="beating-heart">‚ù§Ô∏è</span></h1>
      <h2>Will you be my Valentine?</h2>
      <p>You make ordinary days feel magical, and my smile feels incomplete without you.</p>

      <div class="buttons">
        <button class="yes" onclick="sayYes()">Yes üíñ</button>
        <button class="no" onmouseover="moveNo(this)" onmouseenter="moveNo(this)" onclick="moveNo(this)"
          ontouchstart="moveNo(this)">No üôà</button>
      </div>

      <div class="result" id="result"></div>
    </section>
  </main>

  <section class="surprise" id="surprise">
    <div class="surprise-card">
      <h1>üíñ Surprise üíñ</h1>
      <p>
        Sujishna,<br><br>
        From the moment you came into my life, everything felt warmer and brighter.
        Thank you for being you ‚Äî kind, beautiful, and endlessly special.
        <br><br>
        ‚ù§Ô∏è
      </p>
    </div>
  </section>

  <script>
    // device capability detection and settings
    const isLowPower = (() => {
      try {
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return true;
        const deviceMem = navigator.deviceMemory || 4;
        const hw = navigator.hardwareConcurrency || 4;
        return deviceMem <= 1.5 || hw <= 2;
      } catch (e) {
        return false;
      }
    })();

    function getSplitCount() { return isLowPower ? 3 : 5; }
    function getInitialHeartCount() { return isLowPower ? 18 : 40; }
    const maxHearts = isLowPower ? 30 : 120;

    // sound & haptics opt-in
    let soundEnabled = localStorage.getItem('valentineSound') === 'true';
    window.addEventListener('DOMContentLoaded', () => {
      const cb = document.getElementById('toggleSound');
      if (cb) {
        cb.checked = soundEnabled;
        cb.addEventListener('change', (e) => {
          soundEnabled = !!e.target.checked;
          localStorage.setItem('valentineSound', soundEnabled ? 'true' : 'false');
          if (soundEnabled && navigator.vibrate) navigator.vibrate(15);
        });
      }
    });

    // simple pop sound using WebAudio
    const audioCtx = (typeof AudioContext !== 'undefined') ? new AudioContext() : null;
    function playPop() {
      if (!audioCtx) return;
      if (audioCtx.state === 'suspended') {
        audioCtx.resume().catch(() => { });
      }
      const bufferSize = 0.2 * audioCtx.sampleRate;
      const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const data = buffer.getChannelData(0);
      for (let i = 0; i < bufferSize; i++) {
        data[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / bufferSize, 2);
      }
      const src = audioCtx.createBufferSource();
      src.buffer = buffer;
      const gain = audioCtx.createGain();
      gain.gain.value = 0.18;
      src.connect(gain).connect(audioCtx.destination);
      src.start();
      setTimeout(() => { try { src.stop(); } catch (e) { } }, 300);
    }

    function sayYes() {
      document.getElementById('result').textContent = 'Yay! I knew it üíï';

      // subtle haptic feedback (mobile only)
      if (navigator.vibrate) {
        navigator.vibrate([20, 30, 20]); // light, premium tap ‚Äî not aggressive
      }

      document.getElementById('music').play();

      const initial = getInitialHeartCount();
      for (let i = 0; i < initial; i++) createHeart();
      createConfetti();

      setTimeout(() => {
        document.getElementById('surprise').classList.add('show');
        triggerFireworks();
        createFloatingRoses();

        // soft follow-up haptic on reveal
        if (navigator.vibrate) {
          navigator.vibrate(25);
        }
      }, 1200);
    }

    function moveNo(btn) {
      const maxX = Math.min(150, window.innerWidth / 4);
      const maxY = Math.min(150, window.innerHeight / 4);
      const x = (Math.random() * 2 - 1) * maxX;
      const y = (Math.random() * 2 - 1) * maxY;
      btn.style.transform = `translate(${x}px, ${y}px)`;
    }

    function createHeart() {
      // avoid overloading low-power devices
      if (document.querySelectorAll('.heart').length >= maxHearts) return;
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.textContent = '‚ù§Ô∏è';
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.animationDuration = 8 + Math.random() * 4 + 's';
      heart.style.cursor = 'pointer';
      document.body.appendChild(heart);

      // touch/click feedback
      const onInteract = (e) => {
        e.stopPropagation();
        // visual feedback
        heart.classList.add('touch-feedback');
        heart.style.transform = 'scale(1.15)';
        setTimeout(() => {
          heart.style.transform = '';
          heart.classList.remove('touch-feedback');
        }, 160);

        // optional sound & haptics
        if (soundEnabled) playPop();
        if (soundEnabled && navigator.vibrate) navigator.vibrate(18);

        const rect = heart.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top + rect.height / 2;

        const splitCount = getSplitCount();
        for (let i = 0; i < splitCount; i++) {
          const angle = (i / splitCount) * Math.PI * 2 + (Math.random() - 0.5) * 0.4;
          createSplitHeart(x, y, angle);
        }

        heart.remove();
      };

      heart.addEventListener('click', onInteract);
      heart.addEventListener('touchstart', onInteract, { passive: true });

      setTimeout(() => {
        if (heart.parentElement) heart.remove();
      }, 13000);
    }

    function createSplitHeart(x, y, direction) {
      const splitHeart = document.createElement('div');
      splitHeart.textContent = '‚ù§Ô∏è';
      splitHeart.style.position = 'fixed';
      splitHeart.style.left = x + 'px';
      splitHeart.style.top = y + 'px';
      splitHeart.style.fontSize = '14px';
      splitHeart.style.pointerEvents = 'none';
      splitHeart.style.margin = '0';
      splitHeart.style.padding = '0';
      splitHeart.style.transform = 'translate(-50%, -50%)';
      document.body.appendChild(splitHeart);

      // animate split hearts moving in opposite directions
      let posX = x;
      let posY = y;
      // use a larger velocity multiplier on capable devices
      const velMult = isLowPower ? 3 : 6;
      let velocityX = Math.cos(direction) * velMult * (0.8 + Math.random() * 0.8);
      let velocityY = Math.sin(direction) * velMult * (0.6 + Math.random() * 0.8) - (isLowPower ? 2 : 3);
      let opacity = 1;
      let scale = 1;

      const animate = () => {
        posX += velocityX;
        posY += velocityY;
        velocityY += 0.12; // gravity
        opacity -= 0.012;
        scale += 0.002;

        splitHeart.style.left = posX + 'px';
        splitHeart.style.top = posY + 'px';
        splitHeart.style.opacity = opacity;
        splitHeart.style.transform = `translate(-50%, -50%) scale(${scale})`;

        if (opacity > 0) {
          requestAnimationFrame(animate);
        } else {
          splitHeart.remove();
        }
      };

      animate();
    }

    // cursor sparkle effect
    document.addEventListener('mousemove', (e) => {
      if (Math.random() > 0.92) {
        createSparkle(e.clientX, e.clientY);
      }
    });

    function triggerFireworks() {
      const emojis = ['‚ú®', 'üéÜ', '‚≠ê', 'üí´', 'üåü'];
      const fwCount = isLowPower ? 12 : 30;
      for (let i = 0; i < fwCount; i++) {
        setTimeout(() => {
          const x = window.innerWidth / 2;
          const y = 60;
          createFirework(x, y, emojis[Math.floor(Math.random() * emojis.length)]);
        }, i * 100);
      }
    }

    function createFirework(x, y, emoji) {
      const particle = document.createElement('div');
      particle.className = 'firework-particle';
      particle.textContent = emoji;
      particle.style.left = x + 'px';
      particle.style.top = y + 'px';
      particle.style.fontSize = '1.2rem';

      const angle = (Math.PI * 2 * Math.random());
      const velocity = 150 + Math.random() * 200;
      const tx = Math.cos(angle) * velocity;
      const ty = Math.sin(angle) * velocity;

      particle.style.setProperty('--tx', tx + 'px');
      particle.style.setProperty('--ty', ty + 'px');

      document.getElementById('surprise').appendChild(particle);
      setTimeout(() => particle.remove(), 1200);
    }

    function createConfetti() {
      const colors = ['#ff6b9d', '#ffc75f', '#845ef7', '#00d084', '#00b4d8'];
      const confettiPieces = ['üéâ', '‚ú®', 'üéä', 'üíù', 'üåπ'];
      const pieces = isLowPower ? 20 : 50;
      for (let i = 0; i < pieces; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.textContent = confettiPieces[Math.floor(Math.random() * confettiPieces.length)];
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.top = '-20px';
          confetti.style.animation = `confetti-fall ${2 + Math.random() * 1}s ease-in forwards`;
          confetti.style.delay = i * 20 + 'ms';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 3000);
        }, i * 30);
      }
    }

    function createFloatingRoses() {
      const surpriseElement = document.getElementById('surprise');
      const roses = 5;
      for (let i = 0; i < roses; i++) {
        const rose = document.createElement('div');
        rose.className = 'rose';
        rose.textContent = 'üåπ';
        rose.style.left = Math.random() * 90 + 5 + 'vw';
        rose.style.top = Math.random() * 100 + 'vh';
        rose.style.animationDelay = i * 0.5 + 's';
        rose.style.animationDuration = (6 + Math.random() * 4) + 's';
        surpriseElement.appendChild(rose);
      }
    }

    function createSparkle(x, y) {
      const sparkle = document.createElement('div');
      sparkle.className = 'sparkle';
      sparkle.textContent = '‚ú®';
      sparkle.style.left = x + 'px';
      sparkle.style.top = y + 'px';
      sparkle.style.animationDuration = (0.5 + Math.random() * 0.5) + 's';
      document.body.appendChild(sparkle);
      setTimeout(() => sparkle.remove(), 1000);
    }

    // easter egg: click the beating heart 5 times to unlock secret
    let heartClickCount = 0;

    function setupEasterEgg() {
      const beatingHeart = document.querySelector('.beating-heart');
      if (beatingHeart) {
        beatingHeart.style.cursor = 'pointer';
        beatingHeart.style.userSelect = 'none';
        beatingHeart.addEventListener('click', (e) => {
          e.stopPropagation();
          e.preventDefault();
          heartClickCount++;

          // trigger glow burst effect
          beatingHeart.style.animation = 'none';
          setTimeout(() => {
            beatingHeart.style.animation = 'glow-burst 0.6s ease-in-out';
          }, 10);

          if (heartClickCount === 5) {
            triggerEasterEgg();
            heartClickCount = 0;
          }
        });
      }
    }

    // Setup easter egg immediately and on load
    document.addEventListener('DOMContentLoaded', () => {
      setupEasterEgg();
      createHeart(); // create one heart immediately on page load
      setInterval(() => {
        if (!document.getElementById('surprise').classList.contains('show')) {
          createHeart();
        }
      }, 500);
    });

    // Initialize everything when DOM is ready
    function initializeApp() {
      setupEasterEgg();
      createHeart();
      setInterval(() => {
        if (!document.getElementById('surprise').classList.contains('show')) {
          createHeart();
        }
      }, 500);
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
      initializeApp();
    }

    function triggerEasterEgg() {
      // create a burst of extra hearts from the center
      for (let i = 0; i < 25; i++) {
        setTimeout(() => {
          createHeart();
        }, i * 30);
      }

      // create confetti burst
      createConfetti();

      // show easter egg message
      const resultDiv = document.getElementById('result');
      if (resultDiv) {
        resultDiv.textContent = '‚ú® Secret unlocked! You found the easter egg! ‚ú®';
        resultDiv.style.color = '#ff69b4';
        resultDiv.style.fontSize = '1rem';
        setTimeout(() => {
          resultDiv.textContent = '';
        }, 3000);
      }
    }
  </script>
</body>

</html>